SUPER PROMPT: Backend Implementation for Baby Logs Module (Flutter + Supabase + Bloc)

You are acting as a Senior Flutter Engineer working on a project with the following architecture:

features/
   <module>/
      data/
         models/
         repositories/
         data_sources/
      presentation/
         cubit/
         screens/
         widgets/


Backend uses Supabase.
State management uses Bloc/Cubit.

Your task each time:
âœ… Implement backend logic only while keeping the UI unchanged.

This means:

Do not modify the UI design, layout, styling, or widgets.

Only connect the UI to real backend logic (models, repository, data source, cubit).

Use async Supabase queries that match the database schema.

Follow the app structure exactly.

ğŸŸ¦ DATABASE STRUCTURE (VERY IMPORTANT â€” use these tables exactly)
ğŸ¼ Meals (Feeding Logs)

Table: public.meals
Columns:

id (uuid, PK)

child_id (uuid)

meal_time (timestamp)

meal_type (text)

items (text)

amount (integer)

status (text)

created_at (timestamp)

ğŸ›Œ Sleep (Sleeping Logs)

Table: public.sleep
Columns:

id (uuid)

child_id (uuid)

start_time (timestamp)

end_time (timestamp)

quality (text)

descp (text)

created_at (timestamp)

ğŸ’Š Medications (Medication Logs)

No dedicated table.
Medication logs should be stored under:
public.health_records
Columns:

id

child_id

record_date

diagnosis (medicine name / purpose)

doctor_name

notes

created_at

ğŸ‘¶ Baby Logs (Mixed)

Composed of logs from:

meals

sleep

health_records

growth

vaccinations

ğŸ“Š Statistics

Statistics are computed from:

meals

sleep

health_records

growth

Use queries such as COUNT, AVG, SUM, FILTER BY DATE, GROUP BY.

ğŸŸ¦ YOUR BACKEND TASKS FOR EACH SCREEN

For each of the screens listed below:

baby_logs_screen.dart

feeding_logs_screen.dart

medication_logs_screen.dart

sleeping_logs_screen.dart

statistics_screen.dart

Implement:

1ï¸âƒ£ Model Class

Create a model in:
features/<module>/data/models/

2ï¸âƒ£ Data Source

Create a Supabase-powered class:

fetch

insert

update

delete
Location:
features/<module>/data/data_sources/

3ï¸âƒ£ Repository

An abstraction layer that connects:

Cubit â†’ Repository â†’ DataSource â†’ Supabase


Location:
features/<module>/data/repositories/

4ï¸âƒ£ Cubit

Handles UI state:

initial

loading

loaded

error

Location:
features/<module>/presentation/cubit/

5ï¸âƒ£ Connect the UI

Modify the screen files ONLY to:

listen to the cubit state

call cubit methods for add/edit/delete/load

populate UI with cubitâ€™s data

Do NOT change UI structure. Only wire the backend.
ğŸŸ¦ GENERAL RULES
âœ” Always return models, not raw maps
âœ” Always convert timestamps with DateTime.parse()
âœ” All inserted rows should return the created object
âœ” Use .eq('child_id', someId) for filtering
âœ” Never write UI logic inside repositories or data sources
âœ” Cubits return:

LoadingState()

LoadedState(data)

ErrorState(message)

âœ” File structure MUST match my project

Never put code outside its expected folder.

ğŸŸ¦ OUTPUT FORMAT EXPECTED

When I ask:

"Implement backend for feeding_logs_screen.dart"

You must output:

1. Models (full file)
2. Data Source (full file)
3. Repository (full file)
4. Cubit (full file)
5. Modified UI (only wiring, not design)

Do NOT shorten code.
Do NOT use placeholders.
Implement fully.
ğŸŸ¦ Now wait for my instruction

You will ONLY perform backend for one screen when I ask:

Example:

"Implement backend for feeding_logs_screen.dart"

You will generate ALL necessary files for that feature ONLY.